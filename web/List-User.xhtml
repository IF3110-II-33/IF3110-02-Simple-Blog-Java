<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
<f:view>
    <h:head>
        <title> List User </title>
    </h:head>
    <h:body>
        <ui:composition template="template/basis.xhtml">
            <ui:define name="content">
                <!-- TODO username validator -->
                <div style="">
                    <h:form id="edit_user" style="float: left;width: 20%">
                        <h3>Edit User</h3>
                        Username : <h:inputText id="username" value="#{editUserBean.edited.username}">
                                        <f:validator validatorId="usernameValidator" for="username"/>
                                    </h:inputText>
                        <h:message styleClass="error_message" id="username_message" for="username" />
                        Password : <h:inputText value="#{editUserBean.edited.password}"></h:inputText>
                        Role     : <h:inputText value="#{editUserBean.edited.role}"></h:inputText>
                        <h:commandButton value="EDIT">
                            <f:ajax render="user_table username_message" listener="#{editUserBean.edit()}" execute="username"></f:ajax>
                        </h:commandButton>
                    </h:form>
                    <h:form id="add_user" style="float: left;width: 20%">
                        <h3>add User</h3>
                        Username : <h:inputText id="username" value="#{addUserBean.user.username}">
                                        <f:validator validatorId="usernameValidator" for="username"/>
                                    </h:inputText>
                        <h:message styleClass="error_message" id="username_message" for="username" />
                        Password : <h:inputText value="#{addUserBean.user.password}"></h:inputText>
                        Role     : <h:inputText value="#{addUserBean.user.role}"></h:inputText>
                        Email    : <h:inputText value="#{addUserBean.user.email}"></h:inputText>
                        <h:commandButton value="ADD">
                            <f:ajax render="user_table username_message" listener="#{addUserBean.add()}" execute="add_user"></f:ajax>
                        </h:commandButton>
                    </h:form>
                </div>
                <h1 class="content-subhead">List User</h1>
                <h:dataTable value="#{allUserBean.allUser}" var="user"
                             id="user_table">
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Username" />
                        </f:facet>
                        <h:outputText value="#{user.username}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Password" />
                        </f:facet>
                        <h:outputText value="#{user.password}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Role" />
                        </f:facet>
                        <h:outputText value="#{user.roleName}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Edit" />
                        </f:facet>
                        <h:commandButton value="edit #{user.username}">
                            <f:ajax listener="#{editUserBean.setEdited(user)}" render="edit_user">
                            </f:ajax>
                        </h:commandButton>
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Delete" />
                        </f:facet>
                        <h:outputText value="#{user.roleName}" />
                    </h:column>
                </h:dataTable>
            </ui:define>
        </ui:composition>>
    </h:body>
</f:view>
</html>
